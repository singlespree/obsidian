---
создал заметку: 2024-07-04
---
Кэши процессора работают путем кэширования основной памяти в кэши-строки. 

Сегодня кэш-строки имеют ширину 32 или 64 байта в зависимости от оборудования. 

Ядра ЦП не обращаются к основной памяти напрямую. Они, как правило, обращаются только к своим локальным кэшам. 

В кэшах хранятся как данные, так и инструкции. 

Кэш-строки перемещаются с L1 в L2, а затем в L3, по мере необходимости кэширования новых кэш-строк. 

Оборудование предпочитает линейное перемещение данных и инструкций вдоль кэш-строк. 

Основная память построена на относительно быстрой и дешевой памяти. Кэши построены на очень быстрой и дорогой памяти. 

Доступ к основной памяти чрезвычайно медленный, поэтому нужен кэш. 
- Чтение одного байта из основной памяти приводит к чтению и кэшированию целой кэш-строки. 
- Для записи одного байта в кэш-строку требуется запись всей кэш-строки. 

Маленький размер = Быстро. 
- Компактный, хорошо локализированный код, который помещается в кэше, работает быстрее.
- Компактные структуры данных, которые помещаются в кэше, работают быстрее. 
- Обходы, которые затрагивают только кэшированные данные, работают быстрее. 

Предсказуемые шаблоны доступа лучше. 
- Всякий раз, когда это практично, отдавайте предпочтение линейному обходу массива. 
- Предоставляйте обычные шаблоны доступа к памяти. 
- Оборудование может отлично предсказать размер необходимой памяти. 

Промахи кэша могут привести к промахам БДТ. 
- Кэш переводов виртуального адреса в физический адрес. 
- Операционная система может сообщить нам, где находится память. 

### Задержки Принятые Индустрией
![[Pasted image 20240704141747.png]]

### Иллюстрация Латентности Кэша
![[Pasted image 20240704141829.png]]

