---
создал заметку: 2024-06-30
---
Функция `make` используется для создания и инициализации определённых встроенных типов данных: [[Срезы(Slice)]], [[Карты(maps)]] и [[Каналы(channels)]]. В отличие от функции [[new]], которая выделяет память и возвращает указатель на тип, функция [[make]] возвращает инициализированный экземпляр конкретного типа. 

Использование функции `make`
1. Создание и инициализация [[Срезы(Slice)]]. Функция `make` позволяет создать [[Срезы(Slice)]] указанной длины и [[Ёмкость]]
```
   // Создаём срез int длиной 5 и той же ёмкостью
   s := make([]int, 5)
   fmt.Println(s)  // [0 0 0 0 0]

   // Создаём срез int длиной 5 и ёмкостью 10
   s2 := make([]int, 5, 10)
   fmt.Println(s2) // [0 0 0 0 0]
```

В этом примере `s` и `s2` - это срезы типа int, где `s` имеет длину и [[Ёмкость]] 5, а `s2` - длину 5 и [[Ёмкость]] 10.

2. Создание и инициализация [[Каналы(channels)]]. Функция `make` создаёт канал указанного типа и буферной [[Ёмкость]] 
```
// Создаём буферизованный канал int с ёмкостью 2
   ch := make(chan int, 2)
   ch <- 1
   ch <- 2
   fmt.Println(<-ch)  // 1
   fmt.Println(<-ch)  // 2

   // Создаём небуваферизованный канал int
   nch := make(chan int)
   go func() {
       nch <- 3  // Вставка значения в канал будет блокировать горутину, пока не будет считано значение
   }()
   fmt.Println(<-nch)  // 3
```
в этом примере `ch` - это буферизированный канал, а `nch` - небуферизированный канал.

Отличие от функции [[new]]

Функция [[new]] выделяет память для нового экземпляра типа и возвращает указатель на него. [[new]] можно использовать для любого типа данных, но создаваемое значение имеет нулевое значение(например, 0 для чисел, [[nil]] для указателей и т.д.)

Пример: 
```
// Создание нового int с использованием new
p := new(int)
fmt.Println(*p)  // 0, так как значение имеет нулевое значение по умолчанию

// Создание нового экземпляра структуры Person
type Person struct {
    Name string
    Age  int
}

person := new(Person)
fmt.Println(*person) // { 0}, так как значения имеют нулевые значения по умолчанию
```

Функция [[make]] используется для создания и инициализации [[Срезы(Slice)]], [[Карты(maps)]] и [[Каналы(channels)]]