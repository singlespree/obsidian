---
создал заметку: 2024-07-03
---
Компилятор Go автоматически управляет памятью и может перемещать переменные из стека в [[Куча]] в зависимости от их времени жизни и области видимости. Когда переменная может использоваться за пределами функции, в которой она была создана, она перемещается в [[Куча]]

### Понимание перемещения памяти из стека в [[Куча]]

Перемещение памяти происходит, когда компилятор Go не уверен, что память, выделенная на стеке, будет существовать достаточно долго. В этом случае, память может быть перемещена или "эскалирована" в кучу

```
package main

func createPointer() *int {
    a := 42
    return &a
}

func main() {
    p := createPointer()
    println(*p)
}
```
В этом примере переменная `a` размещена в [[Куча]], потому что её адрес возвращается из функции `createPointer` и она должна продолжать существовать после завершения этой функции.